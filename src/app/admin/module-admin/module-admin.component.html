<div class="main-container">
  <aside class="sidebar">
    <div class="logo-container">
      <img src="img/logoo.png" alt="Logo DecliTech" class="logo-img" />
    </div>
    <nav class="menu">
      <a routerLink="/accueil">🏠 Accueil</a>
      <a routerLink="/admin" class="active">📦 Modules</a>
      <a routerLink="/reservations">📅 Réservations</a>
      <a routerLink="/list">👨‍🏫 Instructeurs</a>
      <a routerLink="/avis">💬 Avis</a>
      <a (click)="logout()">🔒 Déconnecter</a>
    </nav>
  </aside>
  
  <section class="content">
    <h2 class="text-xl font-semibold mb-4 title-blue">Modules</h2>

    <div class="search-bar">
      <input
        type="text"
        class="search-input"
        placeholder="🔍 Rechercher une session..."
        [(ngModel)]="searchTerm"
      />
    </div>

    <div class="table-wrapper">
      <table>
        <thead>
          <tr>
            <th><input type="checkbox" (change)="toggleAllSelection()" /></th>
            <th>Module</th>
            <th>Instructeur(s)</th>
            <th>CoBuild Space</th>
            <th>Tranche</th>
            <th>Jour</th>
            <th>Heure</th>
            <th>Nbre de réservations</th>
            <th>Activation</th>
            <th>Annulation</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let session of modules | paginate: { itemsPerPage: itemsPerPage, currentPage: currentPage }">
            <td><input type="checkbox" [(ngModel)]="session.checked" /></td>
            <td>{{ session.moduleTitle }}</td>
            <td>{{ getInstructorsList(session.instructeurs) }}</td>
            <td>{{ session.coBuildSpaceName }}</td>
            <td>
              <span class="badge" [ngClass]="{
                'tranche-1316': session.tranche === '13-16',
                'tranche-0812': session.tranche === '8-12'
              }">{{ session.tranche }}</span>
            </td>
            <td>{{ session.jour }}</td>
            <td>{{ session.heure }}</td>
            <td class="centered-cell">{{ session.enrolledCount }}</td>
            <td class="centered-cell">
              <label class="custom-switch">
                <input
                  type="checkbox"
                  [(ngModel)]="session.actif"
                  (change)="session.actif ? onActiver(session) : onDesactiver(session)"
                />
                <span class="slider"></span>
              </label>
              <div class="label">{{ session.actif ? 'Activé' : 'Désactivé' }}</div>
            </td>
            <td class="centered-cell">
              <label class="custom-switch cancel">
                <input
                  type="checkbox"
                  [(ngModel)]="session.annule"
                  (change)="onAnnulerSeance(session)"
                />
                <span class="slider red"></span>
              </label>
              <div class="label">{{ session.annule ? 'Annulé' : 'Annuler' }}</div>
            </td>
          </tr>
        </tbody>
      </table>
      
      <pagination-controls (pageChange)="currentPage = $event"></pagination-controls>
    </div>
  </section>
</div>