<div class="dialog-container">
  <button mat-button (click)="isLinear = !isLinear" id="toggle-linear" style="margin-bottom: 16px;">
    {{ !isLinear ? 'Enable linear mode' : 'Disable linear mode' }}
  </button>

  <mat-horizontal-stepper [linear]="isLinear" #stepper>
    <!-- Étape 1 : Choix du module -->
    <mat-step [stepControl]="firstFormGroup" label="Module">
      <form [formGroup]="firstFormGroup">
        <div class="chips-container">
          <span
            *ngFor="let mod of modules"
            (click)="selectModule(mod.id)"
            [class.selected]="selectedModuleId === mod.id"
            class="chip"
            [class.mat-elevation-z4]="selectedModuleId === mod.id"
            style="cursor: pointer; padding: 8px; margin: 4px; border-radius: 16px; background-color: #e0e0e0;"
          >
            {{ mod.title }}
          </span>
        </div>

        <div style="margin-top: 24px;">
          <button mat-button matStepperNext [disabled]="!firstFormGroup.valid">Suivant →</button>
        </div>
      </form>
    </mat-step>

    <!-- Étape 2 : Choix du Cobuild Space -->
    <mat-step [stepControl]="secondFormGroup" label="Cobuild Space">
      <form [formGroup]="secondFormGroup">
        <div class="chips-container">
          <span
            *ngFor="let s of spaces"
            (click)="selectSpace(s.spaceId)"
            [class.selected]="selectedSpaceId === s.spaceId"
            class="chip"
            [class.mat-elevation-z4]="selectedSpaceId === s.spaceId"
            style="cursor: pointer; padding: 8px; margin: 4px; border-radius: 16px; background-color: #e0e0e0;"
          >
            {{ s.name }}
          </span>
        </div>

        <div style="margin-top: 24px;">
          <button mat-button matStepperPrevious>← Précédent</button>
          <button mat-button matStepperNext [disabled]="!secondFormGroup.valid">Suivant →</button>
        </div>
      </form>
    </mat-step>

    <!-- Étape 3 : Choix du jour -->
    <mat-step label="Jour">
      <div class="chips-container">
        <span
          *ngFor="let d of days"
          (click)="selectDay(d)"
          [class.selected]="selectedDay === d"
          class="chip"
          [class.mat-elevation-z4]="selectedDay === d"
          style="cursor: pointer; padding: 8px; margin: 4px; border-radius: 16px; background-color: #e0e0e0;"
        >
          {{ d }}
        </span>
      </div>

      <div style="margin-top: 24px;">
        <button mat-button matStepperPrevious>← Précédent</button>
        <button
          mat-button
          color="primary"
          (click)="assignModule()"
          [disabled]="!selectedDay"
        >
          Affecter
        </button>
      </div>
    </mat-step>
  </mat-horizontal-stepper>
</div>
